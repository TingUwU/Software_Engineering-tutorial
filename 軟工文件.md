資料設計：

| 名稱 |  | 描述 |  |
| ----- | ----- | ----- | ----- |
| store |  | 店家的設定（包括菜單、資訊等） |  |
| **屬性描述** | **屬性名稱** | **屬性型態** | **屬性設定** |
| 店家ID | \_id | ObjectId | required: true, PK unique: true（給mongoDB生） |
| 店家名稱 | name | String | required: true |
| 店家簡介 | description | String | default: ‘’ |
| 擁有者ID | ownerId | ObjectId | required: ture |
| 聯絡電話 | phone | String | default: ‘’ |
| 聯絡信箱 | email | String | default: ‘’ |
| 店家地址 | address | String | required: true |
| 經緯度座標 | coordinates | Array\<Number\> | required: true（格式：\[經度, 緯度\]） |
| 營業時間 | businessHours | {   day: String,   start: String,   close: String,   note: String }\[\] | default:\[\] |
| 菜單 | menu | {   \_id: ObjectId,   itemName: String,   price: Number,   description: String,   imgUrl: String,   isAvailable: Boolean,   tag: String }\[\] | default:\[\] |
| 店家狀態 | isActive | Boolean | default: true |
| 更新時間 | updatedAt | Date | default: 現在時間 |

| 名稱 |  | 描述 |  |
| ----- | ----- | ----- | ----- |
| user |  | 顧客的設定（包括帳密、偏好等） |  |
| **屬性描述** | **屬性名稱** | **屬性型態** | **屬性設定** |
| 使用者ID | \_id | ObjectId | required: true unique: true（給mongoDB生） |
| 使用者帳號 | account | String | required: true unique: true |
| 使用者密碼 | password | String | required: true(儲存加密後密碼) |
| 使用者名稱 | nickname | String | default: ‘’ |
| 角色 | role | String | required: true, enum: \[owner, buyer, admin\] |
| 大頭貼 | photo | String | default: ‘’ |
| 電話 | phone | String | default: ‘’ |
| 電子郵件 | email | String | required: true unique: true |
| 收藏店家 | favorStores | Array\<ObjectId\> | default: \[\], ref: store |
| 收藏商品 | favorItems | {   storeId: ObjectId,   itemId: ObjectId\[\] }\[\] | default:\[\], ref: store |
| 自訂義組合 | customCombos | {    comboName: String,   {     storeId: ObjectId,     itemId: ObjectId\[\]   }\[\] }\[\] | default: \[\], ref: store |
| 更新時間 | updatedAt | Date | default: 現在時間 |

| 名稱 |  | 描述 |  |
| ----- | ----- | ----- | ----- |
| order |  | 顧客提交的訂單（訂單詳情、訂單狀態等） |  |
| **屬性描述** | **屬性名稱** | **屬性型態** | **屬性設定** |
| 訂單ID | \_id | ObjectId | required: true unique: true（給mongoDB生） |
| 店家ID | storeId | ObjectId | required: true, ref: ‘store’ |
| 顧客ID | customerId | ObjectId | ref: ‘customer’ |
| 顧客電話號碼 | customerPhone | String | （未登入顧客必填） |
| 訂單類型 | orderType | String | required: true, enum: \[‘內用’, ‘外帶’\] |
| 內用詳情 | dineInDetail | {   tableNumber: String } | （當orderType為’內用’時需要） |
| 外帶詳情 | takeoutDetail | {   takeoutTime: Date } | （當orderType為’外帶’時需要） |
| 訂單項目 | items | Array\<{   menuItemId: ObjectId,    itemName: String,   quantity: Number,    unitPrice: Number,    customization: \[String\],   itemSubTotal: Number }\> | required: true, default: \[\] |
| 訂單總金額 | totalAmount | Number | requied: true |
| 顧客備註 | remarks | String | default: ‘’ |
| 支付方式 | paymentMethod | String | requied: true, enum: \[‘店內付款’\] |
| 訂單狀態 | state | String | required: true, default: ‘已送出’, enum: \[‘已送出’, ‘已接單’, ‘準備中’, ‘已完成’, ‘顧客已取餐’\] |
| 訂單成立時間 | createAt | Date | default: 現在時間 |
| 訂單更新時間 | updatedAt | Date | default: 現在時間 |

